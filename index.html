<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MagicQuill V2: Precise and Interactive Image Editing with Layered Visual Cues</title>
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YKTY425LJP"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-YKTY425LJP');
    </script>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400&family=Lora:wght@400;500;600&family=Inter:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: #F4DDB3;
            color: #1a1a1a;
            overflow-x: hidden;
            line-height: 1.5;
        }

        /* Hero Section */
        .hero-section {
            min-height: 60vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 3rem 2rem 2rem;
            background: white;
            border-bottom: 1px solid #e5e5e5;
        }

        .hero-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(2rem, 5vw, 3.2rem);
            font-weight: 700;
            color: #E1683B;
            margin-bottom: 0.8rem;
            letter-spacing: -0.02em;
            line-height: 1.2;
        }

        .hero-subtitle {
            font-family: 'Lora', serif;
            font-size: clamp(1.1rem, 3vw, 1.5rem);
            color: #666;
            margin-bottom: 1.5rem;
            max-width: 800px;
            font-weight: 400;
        }

        .authors-section {
            margin-top: 0rem;
            text-align: center;
            max-width: 1000px;
            margin-left: auto;
            margin-right: auto;
            position: relative;
            z-index: 1;
        }

        .authors {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 0rem 1.5rem;
            margin-bottom: 1rem;
            line-height: 1.8;
        }

        .author-block {
            font-size: 1rem;
            color: #444;
            font-weight: 400;
            white-space: nowrap;
        }

        .author-block sup {
            font-size: 0.75em;
            color: #E1683B;
            font-weight: 600;
        }

        .author-block a {
            color: #444;
            text-decoration: none;
            transition: color 0.3s ease;
            border-bottom: 2px solid transparent;
        }

        .author-block a:hover {
            color: #E1683B;
            border-bottom: 2px solid #E1683B;
        }

        .author-affiliation {
            color: #444;
            font-size: 1rem;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.5rem;
        }

        .affiliation-text {
            font-weight: 400;
            letter-spacing: 0.02em;
        }

        .affiliation-text sup {
            color: #E1683B;
            font-weight: 600;
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 1.2rem;
            margin: 1.2rem 0 2rem 0;
            flex-wrap: wrap;
        }

        .nav-button {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
            padding: 0.35rem 1.25rem;
            border-radius: 9999px;
            /* background-color: #363636; */
            border: 2px solid #666;
            color: #666;
            font-size: 0.95rem;
            font-weight: 500;
            text-decoration: none;
            transition: all 0.2s ease-in-out;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        /* Hover Effects */
        .nav-button:hover {
            background-color: #D76F46;
            /* transform: translateY(-2px); */
            /* box-shadow: 0 4px 8px rgba(215, 111, 70, 0.3); */
            color: #ffffff;
        }

        /* Icons inside the button (The emojis) */
        .nav-button span:first-child {
            font-size: 1.1rem;
        }

        /* Video Section */
        .video-section {
            max-width: 900px;
            margin: 0 auto 2rem;
            background: #f9f9f9;
            border: 1px solid #ddd;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        }

        .video-section video {
            width: 100%;
            display: block;
        }

        /* Section Title */
        .section-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.8rem, 4vw, 2.5rem);
            font-weight: 600;
            color: #E1683B;
            text-align: center;
            margin: 2.5rem 0 0.8rem;
            letter-spacing: -0.01em;
        }

        .section-hint {
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
            color: #888;
            text-align: center;
            margin-bottom: 2rem;
            font-weight: 400;
        }

        .section-hint strong {
            font-weight: 600;
            background: linear-gradient(
                90deg,
                #d47d3f 0%,
                #e8a85c 25%,
                #f5d69c 50%,
                #e8a85c 75%,
                #d47d3f 100%
            );
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: shimmer 3s ease-in-out infinite;
            position: relative;
            padding: 0 0.1em;
        }

        .section-hint strong::after {
            content: '';
            position: absolute;
            bottom: -2px;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(
                90deg,
                transparent 0%,
                #e8a85c 50%,
                transparent 100%
            );
            background-size: 200% 100%;
            animation: shimmer 3s ease-in-out infinite;
            opacity: 0.6;
        }

        @keyframes shimmer {
            0% {
                background-position: 100% 50%;
            }
            50% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 100% 50%;
            }
        }

        /* Hover Me Overlay */
        .hover-prompt {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
            z-index: 50;
            opacity: 1;
            transition: opacity 0.4s ease;
        }

        .hover-prompt-text {
            font-family: 'Playfair Display', serif;
            font-size: 1.8rem;
            font-weight: 700;
            font-style: italic;
            letter-spacing: 0.1em;
            background: linear-gradient(
                90deg,
                #E1683B 0%,
                #f5a623 25%,
                #ffffff 50%,
                #f5a623 75%,
                #E1683B 100%
            );
            background-size: 200% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            animation: shimmer-text 2s linear infinite;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) drop-shadow(0 0 20px rgba(225, 104, 59, 0.5));
            position: relative;
        }

        .hover-prompt-text::before {
            content: 'âœ¦';
            margin-right: 0.5rem;
            font-style: normal;
            animation: sparkle 1.5s ease-in-out infinite;
        }

        .hover-prompt-text::after {
            content: 'âœ¦';
            margin-left: 0.5rem;
            font-style: normal;
            animation: sparkle 1.5s ease-in-out infinite 0.75s;
        }

        @keyframes shimmer-text {
            0% {
                background-position: 100% 50%;
            }
            100% {
                background-position: -100% 50%;
            }
        }

        @keyframes sparkle {
            0%, 100% {
                opacity: 0.4;
                transform: scale(0.8);
            }
            50% {
                opacity: 1;
                transform: scale(1.1);
            }
        }

        .layers-container:hover .hover-prompt {
            opacity: 0;
        }

        /* Subsection Title */
        .subsection-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.4rem, 3vw, 2rem);
            font-weight: 600;
            color: #d47d3f;
            text-align: left;
            margin: 2rem 0 1rem;
            padding-left: 0.5rem;
            border-left: 4px solid #E1683B;
            letter-spacing: -0.01em;
        }

        /* Sub-subsection Title */
        .subsubsection-title {
            font-family: 'Inter', sans-serif;
            font-size: clamp(1.1rem, 2vw, 1.3rem);
            font-weight: 600;
            color: #666;
            text-align: left;
            margin: 1.5rem 0 1rem;
            padding-left: 1rem;
            border-left: 3px solid #ccc;
            letter-spacing: 0.01em;
        }

        /* Gallery wrapper for better organization */
        .gallery-wrapper {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 2rem 3rem;
        }

        /* Gallery Grid */
        .gallery {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .case-item {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
            background: white;
            padding: 1rem;
            border: 1px solid #e5e5e5;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
            transition: all 0.3s ease;
        }

        .case-prompt {
            grid-column: 1 / -1;
            text-align: center;
            margin-top: 0.8rem;
            padding-top: 0.8rem;
            border-top: 1px solid #f0f0f0;
            font-family: 'Lora', serif;
            font-size: 1rem;
            color: #444;
            line-height: 1.4;
        }

        .case-prompt strong {
            font-weight: 600;
            color: #E1683B;
            font-family: 'Inter', sans-serif;
            text-transform: uppercase;
            font-size: 0.85rem;
            letter-spacing: 0.05em;
            margin-right: 0.5rem;
        }

        /* Layered Images Container */
        .layers-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
            cursor: pointer;
            perspective: 1200px;
            z-index: 1;
        }

        .layers-container:hover {
            z-index: 10;
        }

        .layers-stack {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
        }

        .layer {
            position: absolute;
            width: 100%;
            height: 100%;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            transform-origin: center center;
        }

        .layer img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid #b5b5b5;
        }

        .layer img.remove-mask {
            opacity: 0.6;
        }

        /* Initial stacked state */
        .layer {
            top: 0;
            left: 0;
            /* z-index set dynamically by JavaScript */
        }

        /* Layered perspective effect on hover - dynamically set by JavaScript */
        .layers-container:hover .layer {
            transform: translateX(var(--layer-x, 0%)) translateZ(var(--layer-z, 0px)) scale(var(--layer-scale, 1));
        }

        .layers-container:hover .layer img {
            opacity: 0.4;
            /* background-color: rgba(255, 255, 255, 0.2); */
        }

        /* Individual layer hover effect */
        .layer:hover {
            z-index: 100 !important;
        }

        .layer:hover img {
            /* transform: scale(1.1); */
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.5);
            opacity: 1 !important;
        }

        /* Result Image */
        .result-container {
            position: relative;
            width: 100%;
            aspect-ratio: 1;
        }

        .result-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
        }

        .result-image:hover {
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
        }

        /* Labels */
        .image-label {
            font-family: 'Inter', sans-serif;
            font-size: 0.85rem;
            font-weight: 500;
            color: #666;
            text-align: center;
            margin-bottom: 0.5rem;
            /* text-transform: uppercase; */
            letter-spacing: 0.05em;
        }

        /* Responsive Design */
        @media (max-width: 1400px) {
            .gallery {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 900px) {
            .gallery {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }

            .case-item {
                grid-template-columns: 1fr;
            }

            .hero-section {
                padding: 2rem 1rem;
            }
        }

        /* Ornamental divider */
        .ornament {
            text-align: center;
            font-size: 1.5rem;
            color: #ccc;
            margin: 2rem 0 1.5rem;
        }

        /* Footer */
        .footer {
            text-align: center;
            padding: 2rem;
            font-size: 0.9rem;
            color: #999;
            background: white;
            border-top: 1px solid #e5e5e5;
            margin-top: 2rem;
        }

        /* Abstract Section */
        .abstract-section {
            max-width: 1000px;
            margin: 0 auto;
        }

        .abstract-title {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.6rem, 3vw, 2rem);
            font-weight: 600;
            color: #E1683B;
            text-align: center;
            margin-bottom: 1.5rem;
            letter-spacing: -0.01em;
        }

        .abstract-content {
            font-family: 'Lora', serif;
            line-height: 1.8;
            color: #333;
            text-align: justify;
            /* background: white; */
            padding: 2rem;
            border: 1px solid #e5e5e5;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        }

        .abstract-content p {
            margin-bottom: 1rem;
        }

        .abstract-content p:last-child {
            margin-bottom: 0;
        }
        .tutorial-section {
            width: 100%;
            padding: 4rem 2rem;
            background: white;
            border-top: 1px solid #e5e5e5;
        }

        .tutorial-container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .tutorial-block {
            margin-bottom: 4rem;
        }

        .tutorial-text {
            font-family: 'Lora', serif;
            font-size: 1.1rem;
            color: #444;
            line-height: 1.8;
            margin-bottom: 1.5rem;
            text-align: justify;
        }

        .tutorial-icon {
            height: 1.4em;
            width: auto;
            vertical-align: middle;
            margin: 0 0.2rem;
            display: inline-block;
            transform: translateY(-2px);
        }

        .ui-overview-img {
            width: 100%;
            max-width: 1000px;
            display: block;
            margin: 2rem auto;
            border: 1px solid #eee;
            box-shadow: 0 4px 12px rgba(0,0,0,0.05);
            border-radius: 8px;
        }

        .step-list {
            list-style: none;
            counter-reset: tutorial-step;
            margin: 1.5rem 0;
            padding-left: 1rem;
        }

        .step-list li {
            position: relative;
            padding-left: 2.5rem;
            margin-bottom: 1rem;
            font-family: 'Lora', serif;
            color: #444;
            font-size: 1.1rem;
        }

        .step-list li::before {
            counter-increment: tutorial-step;
            content: counter(tutorial-step);
            position: absolute;
            left: 0;
            top: 0.2rem;
            width: 1.6rem;
            height: 1.6rem;
            background: #E1683B;
            color: white;
            border-radius: 50%;
            font-family: 'Inter', sans-serif;
            font-size: 0.9rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>

<body>
    <!-- Hero Section -->
    <section class="hero-section">
        <h1 class="hero-title">MagicQuill V2</h1>
        <p class="hero-subtitle">Precise and Interactive Image Editing with Layered Visual Cues</p>

        <div class="authors-section">
            <div class="authors">
                <span class="author-block">
                    <a href="https://zliucz.github.io/">Zichen Liu</a><sup>*,1,2</sup>
                </span>
                <span class="author-block">
                    <a href="https://bruceyy.com/">Yue Yu</a><sup>*,1,2</sup>
                </span>
                <span class="author-block">
                    <a href="https://ken-ouyang.github.io/">Hao Ouyang</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="https://github.com/qiuyu96">Qiuyu Wang</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="https://scholar.google.com/citations?user=dNhzCu4AAAAJ&hl">Shuailei Ma</a><sup>2,3</sup>
                </span>
                <span class="author-block">
                    <a href="https://felixcheng97.github.io/">Ka Leong Cheng</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="https://github.com/encounter1997">Wen Wang</a><sup>2,4</sup>
                </span>
                <span class="author-block">
                    <a href="http://bqy.info/">Qingyan Bai</a><sup>1,2</sup>
                </span>
                <span class="author-block">
                    <a href="https://scholar.google.com/citations?user=f2VoRWYAAAAJ&hl">Yuxuan Zhang</a><sup>5</sup>
                </span>
                <span class="author-block">
                    <a href="https://zengyh1900.github.io/">Yanhong Zeng</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="https://yixuanli98.github.io/">Yixuan Li</a><sup>2,5</sup>
                </span>
                <span class="author-block">
                    <a href="https://openreview.net/profile?id=~Xing_Zhu2">Xing Zhu</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="https://shenyujun.github.io/">Yujun Shen</a><sup>2</sup>
                </span>
                <span class="author-block">
                    <a href="http://cqf.io/">Qifeng Chen</a><sup>1</sup>
                </span>
            </div>

            <div class="author-affiliation">
                <span class="affiliation-text"><sup>1</sup>HKUST, <sup>2</sup>Ant Group, <sup>3</sup>NEU,
                    <sup>4</sup>ZJU,
                    <sup>5</sup>CUHK
            </div>
        </div>

        <div class="nav-links">
            <a class="nav-button" href="https://arxiv.org/abs/2512.03046" target="_blank" rel="noopener noreferrer">
                <span>ðŸ“„</span>
                <span>Paper</span>
            </a>
            <a class="nav-button" href="https://github.com/zliucz/MagicQuillV2" target="_blank" rel="noopener noreferrer">
                <span>ðŸ’»</span>
                <span>GitHub</span>
            </a>
            <a class="nav-button" href="https://huggingface.co/spaces/AI4Editing/MagicQuillV2" target="_blank" rel="noopener noreferrer">
                <span>ðŸ¤—</span>
                <span>HF Demo</span>
            </a>
        </div>

        <div class="video-section">
            <video src="./video.mp4" controls autoplay muted loop>
                Your browser does not support the video tag.
            </video>
        </div>

        <!-- Abstract Section -->
        <section class="abstract-section">
            <h2 class="abstract-title">Abstract</h2>
            <div class="abstract-content">
                <p>
                    We propose MagicQuill V2, a novel system that introduces a layered composition paradigm to
                    generative
                    image editing, bridging the gap between the semantic power of diffusion models and the granular
                    control of traditional graphics software. While diffusion transformers excel at holistic
                    generation,
                    their use of singular, monolithic prompts fails to disentangle distinct user intentions for content,
                    position, and appearance. To overcome this, our method deconstructs creative intent into a stack of
                    controllable visual cues: a content layer for what to create, a spatial layer for where to place it,
                    a structural layer for how it is shaped, and a color layer for its palette. Our technical
                    contributions
                    include a specialized data generation pipeline for context-aware content integration, a unified
                    control
                    module to process all visual cues, and a fine-tuned spatial branch for precise local editing,
                    including object removal. Extensive experiments validate that this layered approach effectively
                    resolves
                    the user intention gap, granting creators direct, intuitive control over the generative process.
                </p>
            </div>
        </section>
    </section>

    <!-- Gallery Section -->
    <section class="gallery-section">
        <h2 class="section-title">Layered Editing Examples</h2>
        <p class="section-hint">
            (<strong>Hover</strong> over Layered Composition to decompose layers)
        </p>

        <div class="gallery-wrapper">
            <!-- Content Layer Section -->
            <h3 class="subsection-title">Content Layer</h3>
            <div class="gallery">
                <!-- Case 1 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="hover-prompt">
                                <span class="hover-prompt-text">hover me</span>
                            </div>
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case_teaser/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case_teaser/fill_mask.png" alt="Fill Mask Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case_teaser/prop_3.png" alt="Prop 3 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case_teaser/prop_2.png" alt="Prop 2 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case_teaser/prop_1.png" alt="Prop 1 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case_teaser/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A girl sits and embraces her dog, with her vintage car parked
                        near by.
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="hover-prompt">
                                <span class="hover-prompt-text">hover me</span>
                            </div>
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case6/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case6/1763536471_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case6/1763536471_prop_1.png" alt="Prop 2 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case6/1763536471_prop_0.png" alt="Prop 1 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case6/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A man in cloak rides a white horse through a serene lake at
                        dawn.
                    </div>
                </div>
            </div>

            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case5/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case5/1763478476_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case5/1763478476_prop_0.png" alt="Prop 1 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case5/1763478476_prop_1.png" alt="Prop 2 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case5/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A group photo of 4 people in a sunny day.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case4/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case4/1763475394_prop_3.png" alt="Prop 4 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case4/1763475394_prop_2.png" alt="Prop 3 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case4/1763475394_prop_1.png" alt="Prop 2 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case4/1763475394_prop_0.png" alt="Prop 1 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case4/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A shot of a modern industrial living room with furnitures.
                    </div>
                </div>
            </div>

            <!-- Moved to Tutorial Section -->

            <!-- Control Layer Section -->
            <h3 class="subsection-title">Control Layer</h3>

            <!-- Structural Layer: Edge -->
            <h4 class="subsubsection-title">Structural Layer: Edge</h4>
            <div class="gallery">
                <!-- Case 1 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case_teaser/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case_teaser/1763605477_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case_teaser/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Add a leather collar with bell to the dog.
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case1/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case1/1763537951_remove_edge_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case1/1763537951_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case1/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Make this cup extra large.
                    </div>
                </div>
            </div>

            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case3/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case3/1763540484_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case3/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Add a flower in this hand.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case4/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case4/1763541403_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case4/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Let him wear a golden dollar-shape glasses.
                    </div>
                </div>
            </div>

            <!-- Moved to Tutorial Section -->

            <!-- Color Layer: Color -->
            <h4 class="subsubsection-title">Color Layer: Color</h4>
            <div class="gallery">
                <!-- Case 1 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case_teaser/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case_teaser/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case_teaser/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn her T-shirt's color to deep green.
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case1/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case1/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case1/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn his T-shirt into vibrant, seamless multi-color horizontal
                        gradient
                    </div>
                </div>
            </div>

            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case2/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case2/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case2/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn the flowers into blue and red.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case3/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case3/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case3/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn her crown into blue diamond.
                    </div>
                </div>
            </div>

            <!-- Moved to Tutorial Section -->

            <!-- Spatial Layer: Local Edit -->
            <h4 class="subsubsection-title">Spatial Layer: Local Edit</h4>
            <div class="gallery">
                <!-- Case 1 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case_teaser/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case_teaser/fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case_teaser/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn the dog's head to face the camera.
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case1/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case1/1763630792_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case1/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Convert the man into black and white lineart style.
                    </div>
                </div>
            </div>

            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case2/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case2/1763631592_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case2/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Add candles on the cake and a fork by the cake.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case3/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case3/1763632235_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case3/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Change the text from "NanoBanana" to "MagicQuill", and the
                        banana neon icon to a feather quill icon.
                    </div>
                </div>
            </div>

            <!-- Moved to Tutorial Section -->

            <!-- Spatial Layer: Removal -->
            <h4 class="subsubsection-title">Spatial Layer: Removal</h4>
            <div class="gallery">
                <!-- Case 1 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case1/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case1/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case1/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>

                <!-- Case 2 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case2/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case2/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case2/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>
            </div>

            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case3/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case3/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case3/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case4/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case4/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case4/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>
            </div>

            <!-- Moved to Tutorial Section -->

        </div>
    </section>

    <!-- Tutorial Section -->
    <section class="tutorial-section">
        <div class="tutorial-container">
            <h2 class="section-title">Tutorial</h2>

        <!-- UI Overview -->
        <div class="tutorial-block">
            <h3 class="subsection-title">System Overview</h3>
            <p class="tutorial-text">
                The <strong>Toolbar</strong> (A) features a new <strong>Local Edit Brush</strong> <img src="./assets/brush_fill.svg" class="tutorial-icon"> for defining the target editing area, along with tools from MagicQuill V1.
            </p>
            <p class="tutorial-text">
                The <strong>Visual Cue Manager</strong> (B) holds all content layer visual cues (foreground props) that users can drag onto the canvas to define what to generate.
            </p>
            <p class="tutorial-text">
                Users can refine these cues using the <strong>Image Segmentation Panel</strong> (C) by clicking the segment icon <img src="./assets/segment.svg" class="tutorial-icon">. This panel allows precise object extraction using dots or bounding boxes, powered by SAM.
            </p>
            <img src="./assets/V2_UI.png" alt="MagicQuill V2 UI" class="ui-overview-img">
        </div>

        <!-- Segmentation -->
        <div class="tutorial-block">
            <h3 class="subsection-title">Image Segmentation</h3>
            <p class="tutorial-text">
                Click the segment icon <img src="./assets/segment.svg" class="tutorial-icon"> to enter the segmentation UI. Users can perform four operations:
            </p>
            <ol class="step-list">
                <li>Add positive dots <img src="./assets/plus_circle.svg" class="tutorial-icon"> to indicate areas to include.</li>
                <li>Add negative dots <img src="./assets/minus_circle.svg" class="tutorial-icon"> to indicate areas to exclude.</li>
                <li>Add bounding box <img src="./assets/box.svg" class="tutorial-icon"> to bound the region of interest.</li>
                <li>Use eraser <img src="./assets/eraser.svg" class="tutorial-icon"> to refine and erase unwanted areas.</li>
            </ol>
            <p class="tutorial-text">
                After segmentation, click the <strong>Save/Save as new prop</strong> button to add the foreground prop to the Visual Cue Manager, or fill with any brush.
            </p>
        </div>

        <!-- Layer Operations -->
        <div class="tutorial-block">
            <h3 class="subsection-title">Layer Operations</h3>

            <!-- Content Layer -->
            <h4 class="subsubsection-title">1. Content Layer</h4>
            <p class="tutorial-text">
                Users can click a foreground prop in the Visual Cue Manager to add it to the canvas for puzzle-like editing. Use the local edit brush <img src="./assets/brush_fill.svg" class="tutorial-icon"> to specify the edit location. The result will respect the user-provided foreground props.
            </p>
            <div class="gallery">
                <!-- Case 5 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case3/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case3/1763474578_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case3/1763474578_prop_0.png" alt="Prop 1 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case3/1763474578_prop_1.png" alt="Prop 2 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case3/1763474578_prop_2.png" alt="Prop 3 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case3/1763474578_prop_3.png" alt="Prop 4 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case3/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A man in denim jacket holds a coke and shows a finger heart.
                    </div>
                </div>

                <!-- Case 6 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./puzzle/case1/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case1/1763468712_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case1/1763468712_prop_0.png" alt="Prop 1 Layer">
                                </div>
                                <div class="layer">
                                    <img src="./puzzle/case1/1763468712_prop_1.png" alt="Prop 2 Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./puzzle/case1/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> A man hugs the rabbit and the fox.
                    </div>
                </div>
            </div>

            <!-- Structural Layer -->
            <h4 class="subsubsection-title">2. Structural Layer</h4>
            <p class="tutorial-text">
                Users can use the add brush <img src="./assets/brush_add.svg" class="tutorial-icon"> to sketch edges and the subtract brush <img src="./assets/brush_subtract.svg" class="tutorial-icon"> to mask existing edges. The result will follow the user's edge map.
            </p>
            <div class="gallery">
                <!-- Case 3 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case6/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case6/1763542902_remove_edge_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case6/1763542902_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case6/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Let this cute ghost have arms and legs.
                    </div>
                </div>

                <!-- Case 4 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./edge/case5/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case5/1763541922_remove_edge_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                                <div class="layer">
                                    <img src="./edge/case5/1763541922_add_edge_mask.png" alt="Add Brush Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./edge/case5/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Make the rabbit's ears bigger.
                    </div>
                </div>
            </div>

            <!-- Color Layer -->
            <h4 class="subsubsection-title">3. Color Layer</h4>
            <p class="tutorial-text">
                Use the color brush <img src="./assets/brush_rgb.svg" class="tutorial-icon"> to overlay semi-transparent color to change the color of specific regions. The result will follow the user's color map.
            </p>
            <div class="gallery">
                <!-- Case 5 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case4/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case4/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case4/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn the dolphin into pink.
                    </div>
                </div>

                <!-- Case 6 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./color/case5/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./color/case5/color_layer.png" alt="Color Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./color/case5/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Turn the woman's dress into yellow.
                    </div>
                </div>
            </div>

            <!-- Spatial Layer (Local Edit) -->
            <h4 class="subsubsection-title">4. Spatial Layer (Local Edit)</h4>
            <p class="tutorial-text">
                Use the local edit brush <img src="./assets/brush_fill.svg" class="tutorial-icon"> to paint an area for local editing. The edit will occur within the specified region.
            </p>
            <div class="gallery">
                <!-- Case 5 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case4/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case4/1763633992_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case4/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Add a white horse in the forest.
                    </div>
                </div>

                <!-- Case 6 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./local/case5/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./local/case5/1763634159_fill_mask.png" alt="Fill Mask Layer">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./local/case5/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Let the man wear white formal suit.
                    </div>
                </div>
            </div>

            <!-- Spatial Layer (Removal) -->
            <h4 class="subsubsection-title">5. Spatial Layer (Removal)</h4>
            <p class="tutorial-text">
                Use the subtract brush <img src="./assets/brush_subtract.svg" class="tutorial-icon"> to paint over an object for precise removal.
            </p>
            <div class="gallery">
                <!-- Case 5 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case5/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case5/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case5/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>

                <!-- Case 6 -->
                <div class="case-item">
                    <div>
                        <div class="image-label">Layered Composition</div>
                        <div class="layers-container">
                            <div class="layers-stack">
                                <div class="layer">
                                    <img src="./removal/case6/background.png" alt="Background Layer">
                                </div>
                                <div class="layer">
                                    <img src="./removal/case6/remove_mask.png" alt="Subtract Brush Layer" class="remove-mask">
                                </div>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="image-label">Editing Result</div>
                        <div class="result-container">
                            <img src="./removal/case6/result.png" alt="Result" class="result-image">
                        </div>
                    </div>
                    <div class="case-prompt">
                        <strong>Editing Prompt:</strong> Remove the instance.
                    </div>
                </div>
            </div>
        </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <p>MagicQuill V2: Precise and Interactive Image Editing with Layered Visual Cues</p>
    </footer>

    <script>
        // Auto-play video when in viewport
        const observerOptions = {
            threshold: 0.5,
            rootMargin: '0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                const video = entry.target;
                if (entry.isIntersecting) {
                    video.play().catch(e => console.log('Autoplay prevented:', e));
                } else {
                    video.pause();
                }
            });
        }, observerOptions);

        document.querySelectorAll('video').forEach(video => {
            observer.observe(video);
        });

        // Pause videos when page is hidden
        document.addEventListener('visibilitychange', () => {
            if (document.hidden) {
                document.querySelectorAll('video').forEach(video => video.pause());
            }
        });

        // Dynamically set layer transforms based on number of layers
        function initializeLayers() {
            document.querySelectorAll('.layers-container').forEach(container => {
                const layers = container.querySelectorAll('.layer');
                const numLayers = layers.length;

                if (numLayers === 0) return;

                layers.forEach((layer, index) => {
                    // Calculate position from -1 (leftmost) to +1 (rightmost)
                    const position = numLayers === 1 ? 0 : (index / (numLayers - 1)) * 2 - 1;

                    // Calculate values based on position
                    // X: spread horizontally (max 35% on each side)
                    const translateX = position * 25;

                    // Z: depth effect (max 40px forward/backward)
                    const translateZ = position * 20;

                    // Scale: from 0.75 (back) to 1.15 (front)
                    const scale = 0.75 + (position + 1) * 0.2;

                    // Set CSS variables
                    layer.style.setProperty('--layer-x', `${translateX}%`);
                    layer.style.setProperty('--layer-z', `${translateZ}px`);
                    layer.style.setProperty('--layer-scale', scale);

                    // Set z-index
                    layer.style.zIndex = index + 1;
                });
            });
        }

        // Add smooth layer hovering with proper z-index management
        document.querySelectorAll('.layer').forEach(layer => {
            layer.addEventListener('mouseenter', function () {
                this.style.zIndex = '100';
            });

            layer.addEventListener('mouseleave', function () {
                // Reset to original z-index
                const layers = this.parentElement.querySelectorAll('.layer');
                layers.forEach((l, idx) => {
                    l.style.zIndex = idx + 1;
                });
            });
        });

        // Initialize layers on page load
        initializeLayers();
    </script>
</body>

</html>